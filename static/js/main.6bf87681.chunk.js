(this["webpackJsonpcode-names"]=this["webpackJsonpcode-names"]||[]).push([[0],{45:function(e,a,t){e.exports=t.p+"static/media/win_blue.aa72455c.png"},46:function(e,a,t){e.exports=t.p+"static/media/win_red.0b56df4b.png"},47:function(e,a,t){e.exports=t.p+"static/media/lose_blue.720ef19d.png"},48:function(e,a,t){e.exports=t.p+"static/media/lose_red.1e19f9fb.png"},50:function(e,a,t){e.exports=t(71)},71:function(e,a,t){"use strict";t.r(a);var r=t(0),s=t.n(r),n=t(20),o=t.n(n),l=t(12),i=t(13),p=t(15),u=t(14),c=t(9),d=t(8),m=t.n(d);t(62);m.a.initializeApp({apiKey:"AIzaSyASdKlIHzVKmMTI31Qx-P0rtRMf2LTEw7w",authDomain:"code-names-6dcda.firebaseapp.com",databaseURL:"https://code-names-6dcda.firebaseio.com",projectId:"code-names-6dcda",storageBucket:"code-names-6dcda.appspot.com",messagingSenderId:"920823128002",appId:"G-1SD6GP60LL"});var h=m.a.firestore(),y=t(49),b=function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={loaded:0},r}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.collection("words").get().then((function(a){var t={};for(var r in a.docs){var s=a.docs[r].data();t[s.version]=s.words}e.setState({loaded:100}),e.props.setWords(t)}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(y.a,{now:this.state.loaded,label:this.state.loaded+"%"}))}}]),t}(r.Component),f=Object(c.b)((function(e){return{}}),(function(e){return{setWords:function(a){return e({type:"set_words",payload:a})}}}))(b),g=t(10),v=t.n(g),_=t(18),E=t(6),k=t(7),C=t(4),w=t(17),R=t(11),B=function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={player_name:"",session_key:"",error_message:""},r}return Object(i.a)(t,[{key:"joinGame",value:function(){var e=this;this.state.player_name?this.state.session_key?h.collection("sessions").where("key","==",this.state.session_key.toUpperCase()).get().then((function(a){1===a.docs.length?"lobby"!==a.docs[0].data().stage?e.setState({error_message:"Please wait for the current round to finish before attempting to join."}):a.docs[0].data().players.includes(e.state.player_name)?e.setState({error_message:"Player name is unavaliable."}):(h.collection("sessions").doc(a.docs[0].id).update({players:m.a.firestore.FieldValue.arrayUnion(e.state.player_name)}),e.props.setSession(a.docs[0].data().key,a.docs[0].id),e.props.setPlayer(e.state.player_name),v.a.save("cn_session",{key:a.docs[0].data().key,db_id:a.docs[0].id}),v.a.save("cn_player",e.state.player_name)):e.setState({error_message:"Session key does not exist."})})):this.setState({error_message:"Enter a session key."}):this.setState({error_message:"Enter a Name!"})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.state.error_message?s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"danger"},this.state.error_message))):null,s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(w.a.Label,null," Session Key: ")),s.a.createElement(C.a,null,s.a.createElement(w.a.Control,{onChange:function(a){return e.setState({session_key:a.target.value})}}))),s.a.createElement("br",null),s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(w.a.Label,null," Player Name: ")),s.a.createElement(C.a,null,s.a.createElement(w.a.Control,{onChange:function(a){return e.setState({player_name:a.target.value})}}))),s.a.createElement("br",null),s.a.createElement(k.a,null,s.a.createElement(E.a,{onClick:function(){return e.joinGame()}},"Join Game")))}}]),t}(r.Component),j=Object(c.b)((function(e){return{}}),(function(e){return{setSession:function(a,t){return e({type:"set_session",payload:{key:a,db_id:t}})},setPlayer:function(a){return e({type:"set_player",payload:a})}}}))(B),O="ABCDEFGHJKLMNOPQRSTUVWXYZ98765432",G=function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={player_name:"",error_message:""},r}return Object(i.a)(t,[{key:"hostGame",value:function(){var e=this;if(this.state.player_name){var a=O[Math.floor(Math.random()*O.length)]+O[Math.floor(Math.random()*O.length)]+O[Math.floor(Math.random()*O.length)]+O[Math.floor(Math.random()*O.length)];h.collection("sessions").add({players:[this.state.player_name],teams:{red:[],blue:[]},key:a,stage:"lobby",version:"classic",round:{id:0,words:[],board:[]}}).then((function(t){e.props.setSession(a,t.id),e.props.setPlayer(e.state.player_name),v.a.save("cn_session",{key:a,db_id:t.id}),v.a.save("cn_player",e.state.player_name)}))}else this.setState({error_message:"Enter a Name!"})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.state.error_message?s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"danger"},this.state.error_message))):null,s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(w.a.Label,null," Player Name: ")),s.a.createElement(C.a,null,s.a.createElement(w.a.Control,{onChange:function(a){return e.setState({player_name:a.target.value})}}))),s.a.createElement(k.a,null,s.a.createElement(E.a,{onClick:function(){return e.hostGame()}},"Host Game")))}}]),t}(r.Component),S=Object(c.b)((function(e){return{topics:e.topics}}),(function(e){return{setRoom:function(a){return e({type:"set_topics",payload:a})},setSession:function(a,t){return e({type:"set_session",payload:{key:a,db_id:t}})},setPlayer:function(a){return e({type:"set_player",payload:a})}}}))(G),z=function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={mode:""},r}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=v.a.load("cn_session"),a=v.a.load("cn_player");e&&e.key&&e.db_id&&a&&(this.props.setSession(e),this.props.setPlayer(a))}},{key:"genBody",value:function(){var e=this;switch(this.state.mode){case"join":return s.a.createElement(_.a.Body,null,s.a.createElement(j,null));case"host":return s.a.createElement(_.a.Body,null,s.a.createElement(S,null));default:return s.a.createElement(_.a.Body,null,s.a.createElement(k.a,null,s.a.createElement(C.a,null),s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"success",onClick:function(){return e.setState({mode:"join"})}},"Join")),s.a.createElement(C.a,null),s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"warning",onClick:function(){return e.setState({mode:"host"})}},"Host")),s.a.createElement(C.a,null)))}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(_.a,null,s.a.createElement(_.a.Header,null,"Code Names"),this.genBody(),s.a.createElement(_.a.Footer,null,""!==this.state.mode?s.a.createElement(E.a,{variant:"dark",onClick:function(){return e.setState({mode:""})}},"Back"):null)))}}]),t}(r.Component),A=Object(c.b)((function(e){return{}}),(function(e){return{setSession:function(a){return e({type:"set_session",payload:a})},setPlayer:function(a){return e({type:"set_player",payload:a})}}}))(z),M=t(39),x=t(28),F=t(23),V=t(45),T=t.n(V),D=t(46),L=t.n(D),P=t(47),I=t.n(P),U=t(48),J=t.n(U);function N(e){if(!e)return"";for(var a=e.toLowerCase().split(" "),t=0;t<a.length;t++)a[t]=a[t][0].toUpperCase()+a[t].slice(1);return a.join(" ")}var H={background:"#ffeecc",textAlign:"center"},K={background:"black",color:"white",textAlign:"center"},Q={background:"#ffb3b3",textAlign:"center"},W={background:"#99c2ff",textAlign:"center"},X=function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={},r}return Object(i.a)(t,[{key:"genBoard",value:function(){var e=this,a=[],t=function(t){var r=s.a.createElement("tr",{key:"r"+t},[0,1,2,3,4].map((function(a){var r=H;return"A"===e.props.round.board[5*t+a]?r=K:"R"===e.props.round.board[5*t+a]?r=Q:"B"===e.props.round.board[5*t+a]&&(r=W),s.a.createElement("td",{id:4*t+a,style:r,key:"i"+(5*t+a)},s.a.createElement("strong",null,N(e.props.round.words[5*t+a])))})));a.push(r)};for(var r in[0,1,2,3,4])t(r);return a}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(k.a,{key:"you"},s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"red"===this.props.player_team?"danger":"primary"},(this.props.teams.red[this.props.round.id%this.props.teams.red.length]===this.props.player_name||this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]===this.props.player_name?"Codemaster ":"Agent ")+N(this.props.player_name)))),s.a.createElement(k.a,{style:{height:"20vh"}},"red"===this.props.player_team?s.a.createElement(C.a,null,this.props.round.id%2&&9===this.props.score.red||!(this.props.round.id%2)&&8===this.props.score.red||-1===this.props.score.blue?s.a.createElement(F.a,{src:L.a,style:{height:"20vh"}}):s.a.createElement(F.a,{src:J.a,style:{height:"20vh"}})):s.a.createElement(C.a,null,!(this.props.round.id%2)&&9===this.props.score.blue||this.props.round.id%2&&8===this.props.score.blue||-1===this.props.score.red?s.a.createElement(F.a,{src:T.a,style:{height:"20vh"}}):s.a.createElement(F.a,{src:I.a,style:{height:"20vh"}}))),s.a.createElement("br",null),s.a.createElement(k.a,{key:"board"},s.a.createElement(C.a,null,s.a.createElement(x.a,{bordered:!0},s.a.createElement("tbody",null,this.genBoard())))))}}]),t}(r.Component),Z=Object(c.b)((function(e){return{player_name:e.player_name,player_team:e.player_team,players:e.players,teams:e.teams,round:e.round,score:e.score}}),(function(e){return{}}))(X);function Y(e){if(!e)return"";for(var a=e.toLowerCase().split(" "),t=0;t<a.length;t++)a[t]=a[t][0].toUpperCase()+a[t].slice(1);return a.join(" ")}var $={background:"white",textAlign:"center"},q={background:"#ffeecc",textAlign:"center"},ee={background:"black",color:"white",textAlign:"center"},ae={background:"#ffb3b3",textAlign:"center"},te={background:"#99c2ff",textAlign:"center"},re=function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={},r}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.collection("sessions").doc(this.props.session.db_id).onSnapshot({includeMetadataChanges:!0},(function(a){a.exists?e.props.updateGame(a.data()):(v.a.remove("cn_player"),v.a.remove("cn_session"),e.props.clearGame())}))}},{key:"giveGuesses",value:function(e){h.collection("sessions").doc(this.props.session.db_id).update({guesses:e})}},{key:"genBody",value:function(){switch(this.props.stage){case"lobby":return this.lobby();case"game":return this.game();case"results":return s.a.createElement(Z,null);default:return null}}},{key:"genFooter",value:function(){var e=this;switch(this.props.stage){case"lobby":return this.props.players[0]===this.props.player_name?s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){return e.startGame()}},"Start Game")),this.props.player_team?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"red"===this.props.player_team?"primary":"danger",onClick:function(){return e.switchTeams()}},"Switch Teams")):null,s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).delete()}},"End Game"))):s.a.createElement(k.a,null,this.props.player_team?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"red"===this.props.player_team?"primary":"danger",onClick:function(){return e.switchTeams()}},"Switch Teams")):null,s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({players:m.a.firestore.FieldValue.arrayRemove(e.props.player_name),"teams.red":m.a.firestore.FieldValue.arrayRemove(e.props.player_name),"teams.blue":m.a.firestore.FieldValue.arrayRemove(e.props.player_name)}).then((function(){v.a.remove("cn_player"),v.a.remove("cn_session"),e.props.clearGame()}))}},"Leave Game")));case"game":if(this.props.players[0]===this.props.player_name)return s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({stage:"lobby"})}},"Return to Lobby")));break;case"results":return this.props.players[0]===this.props.player_name?s.a.createElement(k.a,null,s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){return e.startGame()}},"Next Round")),s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({stage:"lobby"})}},"Return to Lobby")),s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).delete()}},"End Game"))):s.a.createElement(E.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({players:m.a.firestore.FieldValue.arrayRemove(e.props.player_name),"teams.red":m.a.firestore.FieldValue.arrayRemove(e.props.player_name),"teams.blue":m.a.firestore.FieldValue.arrayRemove(e.props.player_name)}).then((function(){v.a.remove("cn_player"),v.a.remove("cn_session"),e.props.clearGame()}))}},"Leave Game");default:return null}}},{key:"startGame",value:function(){if(this.props.players<4||this.props.teams.red.length<2||this.props.teams.blue.length<2)return null;for(var e=[];e.length<this.props.board_size*this.props.board_size;){var a=this.props.words[this.props.version][Math.floor(Math.random()*this.props.words[this.props.version].length)];e.includes(a)||e.push(a)}var t=Array(this.props.board_size*this.props.board_size).fill("C"),r=[],s=Math.floor(Math.random()*(this.props.board_size*this.props.board_size));for(t[s]="A",r.push(s);r.length<10;)s=Math.floor(Math.random()*(this.props.board_size*this.props.board_size)),r.includes(s)||(r.push(s),t[s]=this.props.round.id%2?"B":"R");for(;r.length<18;)s=Math.floor(Math.random()*(this.props.board_size*this.props.board_size)),r.includes(s)||(r.push(s),t[s]=this.props.round.id%2?"R":"B");h.collection("sessions").doc(this.props.session.db_id).update({version:this.props.version,stage:"game","round.words":e,"round.board":t,"round.guesses":Array(this.props.board_size*this.props.board_size).fill(""),turn:this.props.round.id%2?"B":"R",guesses:0,score:{red:0,blue:0},bonus:!1})}},{key:"switchTeams",value:function(){var e=this;"red"===this.props.player_team?h.collection("sessions").doc(this.props.session.db_id).update({"teams.red":m.a.firestore.FieldValue.arrayRemove(this.props.player_name),"teams.blue":m.a.firestore.FieldValue.arrayUnion(this.props.player_name)}).then((function(){e.props.setTeam("blue")})):h.collection("sessions").doc(this.props.session.db_id).update({"teams.blue":m.a.firestore.FieldValue.arrayRemove(this.props.player_name),"teams.red":m.a.firestore.FieldValue.arrayUnion(this.props.player_name)}).then((function(){e.props.setTeam("red")}))}},{key:"getGameVersions",value:function(){var e=[];for(var a in this.props.words)e.push(s.a.createElement("option",{key:a,label:Y(a),value:a}));return e}},{key:"lobby",value:function(){var e=this,a=[];if(this.props.player_team){for(var t in a.push(s.a.createElement(R.a,{variant:"info",key:"code"},"Room Code: "+this.props.session.key)),this.props.players[0]===this.props.player_name&&a.push(s.a.createElement(k.a,{key:"mode"},s.a.createElement(C.a,null,s.a.createElement(w.a.Label,null,s.a.createElement(R.a,{variant:"dark"},"Game Settings:"))),s.a.createElement(C.a,null,s.a.createElement(w.a.Control,{as:"select",value:this.props.version,onChange:function(a){return e.props.changeVersion(a.target.value)}},this.getGameVersions())),s.a.createElement(C.a,null,s.a.createElement(w.a.Control,{as:"select",value:this.props.board_size,onChange:function(a){return e.props.changeSize(a.target.value)}},s.a.createElement("option",{label:"5x5",value:5}),s.a.createElement("option",{label:"6x6",value:6}),s.a.createElement("option",{label:"7x7",value:7}))))),this.props.teams.red)a.push(s.a.createElement(M.a.Item,{variant:"danger",key:this.props.teams.red[t]},this.props.teams.red[t]));for(var r in this.props.teams.blue)a.push(s.a.createElement(M.a.Item,{variant:"primary",key:this.props.teams.blue[r]},this.props.teams.blue[r]))}else a.push(s.a.createElement(k.a,{key:"pick_team"},s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"danger",onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({"teams.red":m.a.firestore.FieldValue.arrayUnion(e.props.player_name)}).then((function(){e.props.setTeam("red")}))}},"Join RED Team")),s.a.createElement(E.a,{variant:"primary",onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({"teams.blue":m.a.firestore.FieldValue.arrayUnion(e.props.player_name)}).then((function(){e.props.setTeam("blue")}))}},"Join BLUE Team"),s.a.createElement(C.a,null)));return a}},{key:"game",value:function(){var e=this,a=[];return a.push(s.a.createElement(k.a,{key:"you"},s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"red"===this.props.player_team?"danger":"primary"},(this.props.teams.red[this.props.round.id%this.props.teams.red.length]===this.props.player_name||this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]===this.props.player_name?"Codemaster ":"Agent ")+Y(this.props.player_name))))),a.push(s.a.createElement(k.a,{key:"scores"},s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"dark"},"Red Score: "+this.props.score.red+"/"+(this.props.round.id%2?8:9))),s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"dark"},"Blue Score: "+this.props.score.blue+"/"+(this.props.round.id%2?9:8))))),a.push(s.a.createElement(k.a,{key:"board+role"},s.a.createElement(C.a,null,s.a.createElement(x.a,{bordered:!0},s.a.createElement("tbody",null,this.genBoard()))))),a.push(s.a.createElement(k.a,{key:"players"},s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"dark"},0===this.props.guesses?("R"===this.props.turn?"Red":"Blue")+" Codemaster is giving a hint.":("R"===this.props.turn?"Red":"Blue")+" team is making guesses.")))),0!==this.props.guesses||("R"===this.props.turn?"red":"blue")!==this.props.player_team||this.props.teams.red[this.props.round.id%this.props.teams.red.length]!==this.props.player_name&&this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]!==this.props.player_name||a.push(s.a.createElement("div",{key:"guesses"},("R"===this.props.turn&&this.props.teams.red[this.props.round.id%this.props.teams.red.length]===this.props.player_name||"B"===this.props.turn&&this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]===this.props.player_name)&&0===this.props.guesses?s.a.createElement(k.a,null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?8:9)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?9:8)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(1)}},"1")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?7:8)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?8:7)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(2)}},"2")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?6:7)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?7:6)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(3)}},"3")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?5:6)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?6:5)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(4)}},"4")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?4:5)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?5:4)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(5)}},"5")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?3:4)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?4:3)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(6)}},"6")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?2:3)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?3:2)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(7)}},"7")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?1:2)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?2:1)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(8)}},"8")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?0:1)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?1:0)?s.a.createElement(C.a,null,s.a.createElement(E.a,{variant:"secondary",onClick:function(){e.giveGuesses(9)}},"9")):null):null)),this.props.guesses>0&&(this.props.bonus?a.push(s.a.createElement(k.a,{key:"info_guesses"},s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"dark"},("R"===this.props.turn?"Red":"Blue")+" team has a Bonus Guess!")),("red"===this.props.player_team&&"R"===this.props.turn||"blue"===this.props.player_team&&"B"===this.props.turn)&&this.props.teams.red[this.props.round.id%this.props.teams.red.length]!==this.props.player_name&&this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]!==this.props.player_name?s.a.createElement(C.a,null,s.a.createElement(E.a,{onClick:function(){var a="blue"===e.props.player_team?"R":"B";h.collection("sessions").doc(e.props.session.db_id).update({guesses:0,bonus:!1,turn:a})}},"Skip Bonus Guess")):null)):a.push(s.a.createElement(k.a,{key:"info_guesses"},s.a.createElement(C.a,null,s.a.createElement(R.a,{variant:"dark"},("R"===this.props.turn?"Red":"Blue")+" team has "+this.props.guesses+" guesses remaining."))))),a}},{key:"genBoard",value:function(){var e=this,a=[];if(this.props.teams.red[this.props.round.id%this.props.teams.red.length]===this.props.player_name||this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]===this.props.player_name)for(var t=function(t){for(var r=[],n=0;n<e.props.board_size;n++)r.push(n);var o=s.a.createElement("tr",{key:"r"+t},r.map((function(a){var r=q;return"A"===e.props.round.board[5*t+a]?r=ee:"R"===e.props.round.board[5*t+a]?r=ae:"B"===e.props.round.board[5*t+a]&&(r=te),s.a.createElement("td",{id:4*t+a,style:r,key:"i"+(5*t+a)},e.props.round.guesses[5*t+a]?s.a.createElement("del",null,Y(e.props.round.words[5*t+a])):s.a.createElement("strong",null,Y(e.props.round.words[5*t+a])))})));a.push(o)},r=0;r<this.props.board_size;r++)t(r);else{var n=function(t){var r=s.a.createElement("tr",{key:"r"+t},[0,1,2,3,4].map((function(a){var r=$;return e.props.round.guesses[5*t+a]&&(r="A"===e.props.round.board[5*t+a]?ee:"R"===e.props.round.board[5*t+a]?ae:"B"===e.props.round.board[5*t+a]?te:q),s.a.createElement("td",{id:5*t+a,style:r,key:"i"+(5*t+a),onClick:function(){("R"===e.props.turn&&"red"===e.props.player_team||"B"===e.props.turn&&"blue"===e.props.player_team)&&h.collection("sessions").doc(e.props.session.db_id).get().then((function(r){var s=r.data(),n="R"===s.turn?"R":"B";if(s.guesses>0&&!s.round.guesses[5*t+a]){switch(s.round.guesses[5*t+a]="X",s.guesses=s.guesses-1,s.round.board[5*t+a]){case"A":s.guesses=0,s.stage="results",s.round.id=s.round.id+1,"red"===e.props.player_team?s.score.red=-1:s.score.blue=-1;break;case"R":s.score.red+=1,"blue"===e.props.player_team&&(n="R",s.guesses=0,s.bonus=!1);break;case"B":s.score.blue+=1,"red"===e.props.player_team&&(n="B",s.guesses=0,s.bonus=!1);break;case"C":s.guesses=0,s.bonus=!1,n="R"===s.turn?"B":"R"}s.guesses<=0&&("red"===e.props.player_team&&"R"===s.round.board[5*t+a]||"blue"===e.props.player_team&&"B"===s.round.board[5*t+a])&&(s.bonus?(n="blue"===e.props.player_team?"R":"B",s.bonus=!1):(s.bonus=!0,s.guesses=1)),(s.score.red>=(e.props.round.id%2?8:9)||s.score.blue>=(e.props.round.id%2?9:8))&&(s.stage="results",s.round.id=s.round.id+1),h.collection("sessions").doc(e.props.session.db_id).update({guesses:s.guesses,"round.guesses":s.round.guesses,turn:n,score:s.score,stage:s.stage,"round.id":s.round.id,bonus:s.bonus})}}))}},s.a.createElement("strong",null,Y(e.props.round.words[5*t+a])))})));a.push(r)};for(var o in[0,1,2,3,4])n(o)}return a}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(_.a,null,s.a.createElement(_.a.Header,null,Y(this.props.stage)),s.a.createElement(_.a.Body,null,this.genBody()),s.a.createElement(_.a.Footer,null,this.genFooter())))}}]),t}(r.Component),se=Object(c.b)((function(e){return{session:e.session,player_name:e.player_name,player_team:e.player_team,stage:e.stage,players:e.players,teams:e.teams,words:e.words,version:e.version,round:e.round,turn:e.turn,guesses:e.guesses,score:e.score,bonus:e.bonus,board_size:e.board_size}}),(function(e){return{updateGame:function(a){return e({type:"update_game",payload:a})},clearGame:function(){return e({type:"clear_game",payload:null})},changeVersion:function(a){return e({type:"set_version",payload:a})},changeSize:function(a){return e({type:"set_board_size",payload:a})},setTeam:function(a){return e({type:"set_team",payload:a})}}}))(re),ne=function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={},r}return Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css",integrity:"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh",crossOrigin:"anonymous"}),this.props.db_updated?s.a.createElement(s.a.Fragment,null,this.props.session.key&&this.props.session.db_id?s.a.createElement(se,null):s.a.createElement(A,null)):s.a.createElement(f,null))}}]),t}(r.Component),oe=Object(c.b)((function(e){return{db_updated:e.db_updated,session:e.session}}),(function(e){return{debug:function(){return e({type:"dump_store",payload:null})},load:function(){return e({type:"load_wordlist",payload:null})}}}))(ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var le=t(26),ie=t(19),pe=t.n(ie),ue={player_name:"",player_team:"",players:[],teams:{red:[],blue:[]},db_updated:!1,version:"classic",words:{},session:{key:"",db_id:""},stage:"",board_size:5,round:{id:0,words:"",board:""},turn:"",guesses:0,bonus:!1,score:{red:0,blue:0}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"dump_store":return console.log(e),e;case"load_wordlist":var t="",r=t.split("\n").map((function(e){return e.toLowerCase()}));return h.collection("words").doc("QU47JPZITi8eX2f1Q9JJ").update({words:r}),e;case"set_words":var s=pe.a.cloneDeep(e);return s.words=a.payload,s.db_updated=!0,s;case"set_version":var n=pe.a.cloneDeep(e);return n.version=a.payload,n;case"set_board_size":var o=pe.a.cloneDeep(e);return o.board_size=a.payload,o;case"set_session":var l=pe.a.cloneDeep(e);return l.session=a.payload,l;case"set_player":var i=pe.a.cloneDeep(e);return i.player_name=a.payload,i;case"set_team":var p=pe.a.cloneDeep(e);return p.player_team=a.payload,p;case"update_game":var u=pe.a.cloneDeep(e);for(var c in u.version=a.payload.version,u.stage=a.payload.stage,u.players=a.payload.players,u.round=a.payload.round,u.turn=a.payload.turn,u.guesses=a.payload.guesses,u.bonus=a.payload.bonus,u.score=a.payload.score,a.payload.players[a.payload.round.chameleon]===e.player_name?u.round.role="":u.round.role=a.payload.round.word,u.teams=a.payload.teams,a.payload.teams.red)e.player_name===a.payload.teams.red[c]&&(u.player_team="red");for(var d in a.payload.teams.blue)e.player_name===a.payload.teams.blue[d]&&(u.player_team="blue");return u;case"clear_game":var m=pe.a.cloneDeep(ue);return m;default:return e}};t(70);var de,me=(de=window.REDUX_INITIAL_DATA,Object(le.b)(ce,de));o.a.render(s.a.createElement(c.a,{store:me},s.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.6bf87681.chunk.js.map