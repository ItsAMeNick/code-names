(this["webpackJsonpcode-names"]=this["webpackJsonpcode-names"]||[]).push([[0],{45:function(e,t,a){e.exports=a(66)},66:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(18),o=a.n(s),l=a(11),i=a(12),p=a(14),u=a(13),c=a(8),d=a(16),m=a.n(d);a(57);m.a.initializeApp({apiKey:"AIzaSyASdKlIHzVKmMTI31Qx-P0rtRMf2LTEw7w",authDomain:"code-names-6dcda.firebaseapp.com",databaseURL:"https://code-names-6dcda.firebaseio.com",projectId:"code-names-6dcda",storageBucket:"code-names-6dcda.appspot.com",messagingSenderId:"920823128002",appId:"G-1SD6GP60LL"});var h=m.a.firestore(),y=a(44),b=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={loaded:0},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.collection("words").get().then((function(t){var a={};for(var r in t.docs){var n=t.docs[r].data();a[n.version]=n.words}e.setState({loaded:100}),e.props.setWords(a)}))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(y.a,{now:this.state.loaded,label:this.state.loaded+"%"}))}}]),a}(r.Component),f=Object(c.b)((function(e){return{}}),(function(e){return{setWords:function(t){return e({type:"set_words",payload:t})}}}))(b),v=a(9),E=a.n(v),g=a(15),_=a(6),k=a(7),w=a(5),j=a(20),B=a(17),C=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={player_name:"",session_key:"",error_message:""},r}return Object(i.a)(a,[{key:"joinGame",value:function(){var e=this;this.state.player_name?this.state.session_key?h.collection("sessions").where("key","==",this.state.session_key.toUpperCase()).get().then((function(t){1===t.docs.length?"lobby"!==t.docs[0].data().stage?e.setState({error_message:"Please wait for the current round to finish before attempting to join."}):t.docs[0].data().players.includes(e.state.player_name)?e.setState({error_message:"Player name is unavaliable."}):(h.collection("sessions").doc(t.docs[0].id).update({players:m.a.firestore.FieldValue.arrayUnion(e.state.player_name)}),e.props.setSession(t.docs[0].data().key,t.docs[0].id),e.props.setPlayer(e.state.player_name),E.a.save("cn_session",{key:t.docs[0].data().key,db_id:t.docs[0].id}),E.a.save("cn_player",e.state.player_name)):e.setState({error_message:"Session key does not exist."})})):this.setState({error_message:"Enter a session key."}):this.setState({error_message:"Enter a Name!"})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.state.error_message?n.a.createElement(k.a,null,n.a.createElement(w.a,null,n.a.createElement(B.a,{variant:"danger"},this.state.error_message))):null,n.a.createElement(k.a,null,n.a.createElement(w.a,null,n.a.createElement(j.a.Label,null," Session Key: ")),n.a.createElement(w.a,null,n.a.createElement(j.a.Control,{onChange:function(t){return e.setState({session_key:t.target.value})}}))),n.a.createElement("br",null),n.a.createElement(k.a,null,n.a.createElement(w.a,null,n.a.createElement(j.a.Label,null," Player Name: ")),n.a.createElement(w.a,null,n.a.createElement(j.a.Control,{onChange:function(t){return e.setState({player_name:t.target.value})}}))),n.a.createElement("br",null),n.a.createElement(k.a,null,n.a.createElement(_.a,{onClick:function(){return e.joinGame()}},"Join Game")))}}]),a}(r.Component),O=Object(c.b)((function(e){return{}}),(function(e){return{setSession:function(t,a){return e({type:"set_session",payload:{key:t,db_id:a}})},setPlayer:function(t){return e({type:"set_player",payload:t})}}}))(C),R="ABCDEFGHJKLMNOPQRSTUVWXYZ98765432",S=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={player_name:"",error_message:""},r}return Object(i.a)(a,[{key:"hostGame",value:function(){var e=this;if(this.state.player_name){var t=R[Math.floor(Math.random()*R.length)]+R[Math.floor(Math.random()*R.length)]+R[Math.floor(Math.random()*R.length)]+R[Math.floor(Math.random()*R.length)];h.collection("sessions").add({players:[this.state.player_name],teams:{red:[],blue:[]},key:t,stage:"lobby",round:{id:0,words:[],board:[]}}).then((function(a){e.props.setSession(t,a.id),e.props.setPlayer(e.state.player_name),E.a.save("cn_session",{key:t,db_id:a.id}),E.a.save("cn_player",e.state.player_name)}))}else this.setState({error_message:"Enter a Name!"})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.state.error_message?n.a.createElement(k.a,null,n.a.createElement(w.a,null,n.a.createElement(B.a,{variant:"danger"},this.state.error_message))):null,n.a.createElement(k.a,null,n.a.createElement(w.a,null,n.a.createElement(j.a.Label,null," Player Name: ")),n.a.createElement(w.a,null,n.a.createElement(j.a.Control,{onChange:function(t){return e.setState({player_name:t.target.value})}}))),n.a.createElement(k.a,null,n.a.createElement(_.a,{onClick:function(){return e.hostGame()}},"Host Game")))}}]),a}(r.Component),M=Object(c.b)((function(e){return{topics:e.topics}}),(function(e){return{setRoom:function(t){return e({type:"set_topics",payload:t})},setSession:function(t,a){return e({type:"set_session",payload:{key:t,db_id:a}})},setPlayer:function(t){return e({type:"set_player",payload:t})}}}))(S),G=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={mode:""},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=E.a.load("cn_session"),t=E.a.load("cn_player");e&&e.key&&e.db_id&&t&&(this.props.setSession(e),this.props.setPlayer(t))}},{key:"genBody",value:function(){var e=this;switch(this.state.mode){case"join":return n.a.createElement(g.a.Body,null,n.a.createElement(O,null));case"host":return n.a.createElement(g.a.Body,null,n.a.createElement(M,null));default:return n.a.createElement(g.a.Body,null,n.a.createElement(k.a,null,n.a.createElement(w.a,null),n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"success",onClick:function(){return e.setState({mode:"join"})}},"Join")),n.a.createElement(w.a,null),n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"warning",onClick:function(){return e.setState({mode:"host"})}},"Host")),n.a.createElement(w.a,null)))}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(g.a,null,n.a.createElement(g.a.Header,null,"Code Names"),this.genBody(),n.a.createElement(g.a.Footer,null,""!==this.state.mode?n.a.createElement(_.a,{variant:"dark",onClick:function(){return e.setState({mode:""})}},"Back"):null)))}}]),a}(r.Component),A=Object(c.b)((function(e){return{}}),(function(e){return{setSession:function(t){return e({type:"set_session",payload:t})},setPlayer:function(t){return e({type:"set_player",payload:t})}}}))(G),D=a(37),L=a(43);function P(e){if(!e)return"";for(var t=e.toLowerCase().split(" "),a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].slice(1);return t.join(" ")}var F={background:"white",textAlign:"center"},I={background:"#ffeecc",textAlign:"center"},T={background:"black",color:"white",textAlign:"center"},x={background:"#ffb3b3",textAlign:"center"},U={background:"#99c2ff",textAlign:"center"},V=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.collection("sessions").doc(this.props.session.db_id).onSnapshot({includeMetadataChanges:!0},(function(t){t.exists?e.props.updateGame(t.data()):(E.a.remove("cn_player"),E.a.remove("cn_session"),e.props.clearGame())}))}},{key:"genBody",value:function(){switch(this.props.stage){case"lobby":return this.lobby();case"game":return this.game();default:return null}}},{key:"genFooter",value:function(){var e=this;switch(this.props.stage){case"lobby":return this.props.players[0]===this.props.player_name?n.a.createElement(k.a,null,n.a.createElement(w.a,null,n.a.createElement(_.a,{onClick:function(){for(var t=[];t.length<25;){var a=e.props.words[e.props.version][Math.floor(Math.random()*e.props.words[e.props.version].length)];t.includes(a)||t.push(a)}var r=Array(25).fill("C"),n=[],s=Math.floor(25*Math.random());for(r[s]="A",n.push(s);n.length<10;)s=Math.floor(25*Math.random()),n.includes(s)||(n.push(s),r[s]=e.props.round.id%2?"B":"R");for(;n.length<18;)s=Math.floor(25*Math.random()),n.includes(s)||(n.push(s),r[s]=e.props.round.id%2?"R":"B");h.collection("sessions").doc(e.props.session.db_id).update({stage:"game","round.words":t,"round.board":r,"round.guesses":Array(25).fill(""),turn:e.props.round.id%2?"B":"R",guesses:0,score:{red:0,blue:0}})}},"Start Game")),n.a.createElement(w.a,null,n.a.createElement(_.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).delete()}},"End Game"))):n.a.createElement(_.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({players:m.a.firestore.FieldValue.arrayRemove(e.props.player_name),"teams.red":m.a.firestore.FieldValue.arrayRemove(e.props.player_name),"teams.blue":m.a.firestore.FieldValue.arrayRemove(e.props.player_name)}).then((function(){E.a.remove("cn_player"),E.a.remove("cn_session"),e.props.clearGame()}))}},"Leave Game");case"game":if(this.props.players[0]===this.props.player_name)return n.a.createElement(k.a,null,n.a.createElement(w.a,null,n.a.createElement(_.a,{onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({stage:"lobby"})}},"Return to Lobby")));break;default:return null}}},{key:"lobby",value:function(){var e=this,t=[];if(this.props.player_team){for(var a in t.push(n.a.createElement(B.a,{variant:"info",key:"code"},"Room Code: "+this.props.session.key)),this.props.teams.red)t.push(n.a.createElement(D.a.Item,{variant:"danger",key:this.props.teams.red[a]},this.props.teams.red[a]));for(var r in this.props.teams.blue)t.push(n.a.createElement(D.a.Item,{variant:"primary",key:this.props.teams.blue[r]},this.props.teams.blue[r]))}else t.push(n.a.createElement(k.a,{key:"pick_team"},n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"danger",onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({"teams.red":m.a.firestore.FieldValue.arrayUnion(e.props.player_name)}).then((function(){e.props.setTeam("red")}))}},"Join RED Team")),n.a.createElement(_.a,{variant:"primary",onClick:function(){h.collection("sessions").doc(e.props.session.db_id).update({"teams.blue":m.a.firestore.FieldValue.arrayUnion(e.props.player_name)}).then((function(){e.props.setTeam("blue")}))}},"Join BLUE Team"),n.a.createElement(w.a,null)));return t}},{key:"game",value:function(){var e=[];return e.push(n.a.createElement(k.a,{key:"you"},n.a.createElement(w.a,null,n.a.createElement(B.a,{variant:"red"===this.props.player_team?"danger":"primary"},(this.props.teams.red[this.props.round.id%this.props.teams.red.length]===this.props.player_name||this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]===this.props.player_name?"Codemaster ":"Agent ")+P(this.props.player_name))))),e.push(n.a.createElement(k.a,{key:"scores"},n.a.createElement(w.a,null,n.a.createElement(B.a,{variant:"dark"},"Red Score: "+this.props.score.red)),n.a.createElement(w.a,null,n.a.createElement(B.a,{variant:"dark"},"Blue Score: "+this.props.score.blue)))),e.push(n.a.createElement(k.a,{key:"board+role"},n.a.createElement(w.a,null,n.a.createElement(L.a,{bordered:!0},n.a.createElement("tbody",null,this.genBoard()))))),e.push(n.a.createElement(k.a,{key:"players"},n.a.createElement(w.a,null,n.a.createElement(B.a,{variant:"dark"},0===this.props.guesses?("R"===this.props.turn?"Red":"Blue")+" Codemaster is giving a hint.":("R"===this.props.turn?"Red":"Blue")+" team is making guesses.")))),0!==this.props.guesses||("R"===this.props.turn?"red":"blue")!==this.props.player_team||this.props.teams.red[this.props.round.id%this.props.teams.red.length]!==this.props.player_name&&this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]!==this.props.player_name||e.push(n.a.createElement("div",{key:"guesses"},("R"===this.props.turn&&this.props.teams.red[this.props.round.id%this.props.teams.red.length]===this.props.player_name||"B"===this.props.turn&&this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]===this.props.player_name)&&0===this.props.guesses?n.a.createElement(k.a,null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?8:9)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?9:8)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"1")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?7:8)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?8:7)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"2")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?6:7)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?7:6)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"3")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?5:6)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?6:5)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"4")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?4:6)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?6:4)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"5")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?3:5)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?5:3)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"6")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?2:4)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?4:2)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"7")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?1:3)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?3:1)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"8")):null,"R"===this.props.turn&&this.props.score.red<(this.props.round.id%2?0:2)||"B"===this.props.turn&&this.props.score.blue<(this.props.round.id%2?2:0)?n.a.createElement(w.a,null,n.a.createElement(_.a,{variant:"secondary"},"9")):null):null)),e}},{key:"genBoard",value:function(){var e=this,t=[];if(this.props.teams.red[this.props.round.id%this.props.teams.red.length]===this.props.player_name||this.props.teams.blue[this.props.round.id%this.props.teams.blue.length]===this.props.player_name){var a=function(a){var r=n.a.createElement("tr",{key:"r"+a},[0,1,2,3,4].map((function(t){var r=I;return"A"===e.props.round.board[5*a+t]?r=T:"R"===e.props.round.board[5*a+t]?r=x:"B"===e.props.round.board[5*a+t]&&(r=U),n.a.createElement("td",{style:r,key:"i"+(4*a+t)},n.a.createElement("strong",null,P(e.props.round.words[5*a+t])))})));t.push(r)};for(var r in[0,1,2,3,4])a(r)}else{var s=function(a){var r=n.a.createElement("tr",{key:"r"+a},[0,1,2,3,4].map((function(t){var r=F;return e.props.round.guesses[5*a+t]&&(r="A"===e.props.round.board[5*a+t]?T:"R"===e.props.round.board[5*a+t]?x:"B"===e.props.round.board[5*a+t]?U:I),n.a.createElement("td",{style:r,key:"i"+(4*a+t)},n.a.createElement("strong",null,P(e.props.round.words[5*a+t])))})));t.push(r)};for(var o in[0,1,2,3,4])s(o)}return t}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(g.a,null,n.a.createElement(g.a.Header,null,P(this.props.stage)),n.a.createElement(g.a.Body,null,this.genBody()),n.a.createElement(g.a.Footer,null,this.genFooter())))}}]),a}(r.Component),N=Object(c.b)((function(e){return{session:e.session,player_name:e.player_name,player_team:e.player_team,stage:e.stage,players:e.players,teams:e.teams,words:e.words,version:e.version,round:e.round,turn:e.turn,guesses:e.guesses,score:e.score}}),(function(e){return{updateGame:function(t){return e({type:"update_game",payload:t})},clearGame:function(){return e({type:"clear_game",payload:null})},setTeam:function(t){return e({type:"set_team",payload:t})}}}))(V),H=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css",integrity:"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh",crossOrigin:"anonymous"}),n.a.createElement("button",{onClick:function(){return e.props.debug()}},"DEBUG"),this.props.db_updated?n.a.createElement(n.a.Fragment,null,this.props.session.key&&this.props.session.db_id?n.a.createElement(N,null):n.a.createElement(A,null)):n.a.createElement(f,null))}}]),a}(r.Component),J=Object(c.b)((function(e){return{db_updated:e.db_updated,session:e.session}}),(function(e){return{debug:function(){return e({type:"dump_store",payload:null})},load:function(){return e({type:"load_wordlist",payload:null})}}}))(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(25),K=a(21),Q=a.n(K),z={player_name:"",player_team:"",players:[],teams:{red:[],blue:[]},db_updated:!1,version:"classic",words:{},session:{key:"",db_id:""},stage:"",round:{id:0,words:"",board:""},turn:"",guesses:0,score:{red:0,blue:0}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dump_store":return console.log(e),e;case"load_wordlist":console.log(e);var a="",r=a.split("\n").map((function(e){return e.toLowerCase()}));return console.log(r),h.collection("words").doc("WuyqyBh1ecLt16urvTS2").update({words:r}),e;case"set_words":var n=Q.a.cloneDeep(e);return n.words=t.payload,n.db_updated=!0,n;case"set_session":var s=Q.a.cloneDeep(e);return s.session=t.payload,s;case"set_player":var o=Q.a.cloneDeep(e);return o.player_name=t.payload,o;case"set_team":var l=Q.a.cloneDeep(e);return l.player_team=t.payload,l;case"update_game":var i=Q.a.cloneDeep(e);for(var p in i.stage=t.payload.stage,i.players=t.payload.players,i.round=t.payload.round,i.turn=t.payload.turn,i.guesses=t.payload.guesses,i.score=t.payload.score,t.payload.players[t.payload.round.chameleon]===e.player_name?i.round.role="":i.round.role=t.payload.round.word,i.teams=t.payload.teams,t.payload.teams.red)e.player_name===t.payload.teams.red[p]&&(i.player_team="red");for(var u in t.payload.teams.blue)e.player_name===t.payload.teams.blue[u]&&(i.player_team="blue");return i;case"clear_game":var c=Q.a.cloneDeep(z);return c;default:return e}};a(65);var q,Y=(q=window.REDUX_INITIAL_DATA,Object(W.b)(X,q));o.a.render(n.a.createElement(c.a,{store:Y},n.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.4182da67.chunk.js.map